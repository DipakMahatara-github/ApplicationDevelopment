@using ApplicationDevelopment.Service
@implements IDisposable

<div class="vertical-navbar">
    <h4 class="nav-title">My Journal</h4>

    @if (AuthService.IsLoggedIn())
    {
        <NavLink href="/add-entry" class="nav-link">Add Entry</NavLink>
        <NavLink href="/history" class="nav-link">History</NavLink>
    }
    else
    {
        <div class="nav-link locked-link">🔒 Add Entry</div>
        <div class="nav-link locked-link">🔒 History</div>
    }

    <NavLink href="/login" class="nav-link">Unlock</NavLink>
    <NavLink href="/register" class="nav-link">Set PIN</NavLink>
</div>

@code {
    protected override void OnInitialized()
    {
        AuthService.OnAuthStateChanged += Refresh;
    }

    private void Refresh()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        AuthService.OnAuthStateChanged -= Refresh;
    }
}