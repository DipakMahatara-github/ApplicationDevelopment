@page "/add-entry"
@using ApplicationDevelopment.Model
@using ApplicationDevelopment.Service
@inject NavigationManager NavManager

<div class="entry-page">
    <div class="entry-card shadow-sm">
        <div class="card-header">
            <h2>Create Journal Entry</h2>
        </div>

        <EditForm Model="_entry" OnValidSubmit="Save">
            <DataAnnotationsValidator />

            <div class="form-row">
                <div class="form-group">
                    <label>Primary Mood</label>
                    <InputSelect @bind-Value="_entry.PrimaryMood" class="mood-select">
                        <option value="">-- Select --</option>
                        <option>Happy</option>
                        <option>Calm</option>
                        <option>Sad</option>
                        <option>Angry</option>
                    </InputSelect>
                </div>

                <div class="form-group">
                    <label>Secondary Mood</label>
                    <InputSelect @bind-Value="_entry.SecondaryMood" class="mood-select">
                        <option value="">None</option>
                        <option>Excited</option>
                        <option>Tired</option>
                        <option>Grateful</option>
                    </InputSelect>
                </div>
            </div>

            <div class="form-group">
                <label>Journal Content</label>
                <InputTextArea @bind-Value="_entry.Content" class="content-area" />
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-save">Save Entry</button>
            </div>
        </EditForm>
    </div>
</div>

@code {
    private JournalEntry _entry = new();

    private async Task Save()
    {
        await JournalService.AddEntryAsync(_entry);
        NavManager.NavigateTo("/history");
    }
}