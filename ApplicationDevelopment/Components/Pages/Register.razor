@page "/register"
@using ApplicationDevelopment.Service
@inject NavigationManager NavManager

<h2>Set Account</h2>

<div class="entry-card" style="max-width:400px;padding:1rem;">
    <label>Username</label>
    <input class="content-area" @bind="_username" />

    <label>Password</label>
    <input type="password" class="content-area" @bind="_password" />

    @if (!string.IsNullOrEmpty(_error))
    {
        <p style="color:red">@_error</p>
    }

    <button @onclick="RegisterUser">Save</button>
</div>

@code {
    private string _username = "";
    private string _password = "";
    private string _error = "";

    private async Task RegisterUser()
    {
        if (string.IsNullOrWhiteSpace(_username) || string.IsNullOrWhiteSpace(_password))
        {
            _error = "Username and password required";
            return;
        }

        await AuthService.RegisterAsync(_username, _password);

        NavManager.NavigateTo("/login", true); // must login manually
    }
}